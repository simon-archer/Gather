{
  "version": 3,
  "sources": ["islands/UnifiedIsland/UnifiedIsland.tsx"],
  "sourcesContent": ["import { h, Fragment } from \"preact\";\nimport { useState, useEffect, useRef } from \"preact/hooks\";\nimport { tw } from \"twind\";\nimport InputField from \"./InputField.ts\";\nimport AudioPlayer from \"./AudioPlayer.ts\";\nimport SubjectCard from \"./SubjectCard.ts\";\n\nexport default function UnifiedIsland() {\n  const audioRef = useRef(typeof Audio !== 'undefined' ? new Audio() : null);\n  const [finalResponseText, setFinalResponseText] = useState(\"\");\n  const [textId, setTextId] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(true);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [showSubjectCard, setShowSubjectCard] = useState(true);\n  const [userInput, setUserInput] = useState(\"\");\n  const [voiceId, setVoiceId] = useState(\"\");\n  const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\n\n  const handleTextGenerated = (text, id) => {\n    setFinalResponseText({ choices: [{ message: { function_call: { arguments: text } } }] });\n    setTextId(id);\n  };\n\n  return h(\"div\", { class: tw`flex flex-row items-center justify-center min-h-screen` }, [\n    isCollapsed && h(Fragment, {}, [\n      h(\"button\", {\n        onClick: () => { setFinalResponseText(\"\"); setSelectedItem(null); setShowSubjectCard(true); setAudioBlob(null); },\n        class: tw`fixed z-10 top-5 right-0 transform -translate-x-1/2 w-12 h-12 bg-[#38A1FF] hover:bg-[#318BDC] text-white font-semibold flex justify-center items-center rounded-full shadow-lg`,\n      }, [\n        h(\"svg\", { class: tw`fill-current text-white`, width: \"24\", height: \"24\" },\n          h(\"path\", { d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" })\n        )\n      ]),\n      h(\"div\", {\n        class: tw`flex flex-col items-center justify-center z-0 w-full p-4`\n      }, [\n        !selectedItem && (!finalResponseText || finalResponseText === \"\") && h(InputField, { setFinalResponseText: handleTextGenerated, isLoading, setIsLoading, setVoiceId }),\n          showSubjectCard && finalResponseText && h(SubjectCard, { \n            message: selectedItem || finalResponseText, \n            setAudioBlob: setAudioBlob, // directly pass the setAudioBlob function\n            userInput, \n            voiceId, \n            class: tw`w-auto max-w-xl` \n          }),\n        audioBlob && h(AudioPlayer, { audioBlob: audioBlob, setIsLoading, audioRef, class: tw`w-full` })\n      ])\n    ])\n  ])\n};\n"],
  "mappings": "qPAOe,SAAR,eAAiC,CACtC,IAAM,SAAW,EAAO,OAAO,MAAU,IAAc,IAAI,MAAU,IAAI,EACnE,CAAC,kBAAmB,oBAAoB,EAAI,EAAS,EAAE,EACvD,CAAC,OAAQ,SAAS,EAAI,EAAS,IAAI,EACnC,CAAC,UAAW,YAAY,EAAI,EAAS,EAAK,EAC1C,CAAC,YAAa,cAAc,EAAI,EAAS,EAAI,EAC7C,CAAC,aAAc,eAAe,EAAI,EAAS,IAAI,EAC/C,CAAC,gBAAiB,kBAAkB,EAAI,EAAS,EAAI,EACrD,CAAC,UAAW,YAAY,EAAI,EAAS,EAAE,EACvC,CAAC,QAAS,UAAU,EAAI,EAAS,EAAE,EACnC,CAAC,UAAW,YAAY,EAAI,EAAsB,IAAI,EAEtD,oBAAsB,CAAC,KAAM,KAAO,CACxC,qBAAqB,CAAE,QAAS,CAAC,CAAE,QAAS,CAAE,cAAe,CAAE,UAAW,IAAK,CAAE,CAAE,CAAC,CAAE,CAAC,EACvF,UAAU,EAAE,CACd,EAEA,OAAO,GAAE,MAAO,CAAE,MAAO,0DAA2D,EAAG,CACrF,aAAe,GAAE,EAAU,CAAC,EAAG,CAC7B,GAAE,SAAU,CACV,QAAS,IAAM,CAAE,qBAAqB,EAAE,EAAG,gBAAgB,IAAI,EAAG,mBAAmB,EAAI,EAAG,aAAa,IAAI,CAAG,EAChH,MAAO,kLACT,EAAG,CACD,GAAE,MAAO,CAAE,MAAO,4BAA6B,MAAO,KAAM,OAAQ,IAAK,EACvE,GAAE,OAAQ,CAAE,EAAG,qCAAsC,CAAC,CACxD,CACF,CAAC,EACD,GAAE,MAAO,CACP,MAAO,4DACT,EAAG,CACD,CAAC,eAAiB,CAAC,mBAAqB,oBAAsB,KAAO,GAAE,WAAY,CAAE,qBAAsB,oBAAqB,UAAW,aAAc,UAAW,CAAC,EACnK,iBAAmB,mBAAqB,GAAE,YAAa,CACrD,QAAS,cAAgB,kBACzB,aACA,UACA,QACA,MAAO,mBACT,CAAC,EACH,WAAa,GAAE,YAAa,CAAE,UAAsB,aAAc,SAAU,MAAO,UAAW,CAAC,CACjG,CAAC,CACH,CAAC,CACH,CAAC,CACH",
  "names": []
}
