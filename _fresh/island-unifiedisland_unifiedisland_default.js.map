{
  "version": 3,
  "sources": ["islands/UnifiedIsland/UnifiedIsland.tsx"],
  "sourcesContent": ["import { h } from \"preact\";\nimport { useState, useEffect } from \"preact/hooks\";\nimport { tw } from \"twind\";\nimport InputField from \"./InputField.ts\";\nimport AudioPlayer from \"./AudioPlayer.ts\"\nimport History from \"./History.ts\";\nimport SubjectCard from \"./SubjectCard.ts\";\n\n\nexport default function UnifiedIsland() {\n  const [finalResponseText, setFinalResponseText] = useState(\"\");\n  const [textId, setTextId] = useState(null); \n  const [isLoading, setIsLoading] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(true);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [showSubjectCard, setShowSubjectCard] = useState(true);\n  const [shouldRefreshHistory, setShouldRefreshHistory] = useState(false);\n\n  // Modify the setFinalResponseText function to also set the textId\n  const handleTextGenerated = (text, id) => {\n    setFinalResponseText({ choices: [{ message: { function_call: { arguments: text } } }] });\n    setTextId(id);\n  };\n\n  const handleGenerateContent = async (userInput) => {\n    const response = await fetch('/api/chat', {\n      method: 'POST',\n      body: new URLSearchParams({ userInput }),\n    });\n\n    if (response.ok) {\n      setShouldRefreshHistory(true);\n    }\n  };\n\n\n  useEffect(() => {\n    console.log(selectedItem);\n  }, [selectedItem]);\n\n  return h(\"div\", { class: tw`flex flex-row items-center justify-center min-h-screen pb-32` }, [\n    // h(\"div\", {\n    //   class: tw`relative ${isCollapsed ? 'sm:w-0 w-0 md:w-1/2 lg:w-1/3' : 'w-full'} flex flex-col items-start h-screen overflow-auto border-r border-gray-200`\n    // }, [\n    //   h(History, { \n    //     isCollapsed: isCollapsed, \n    //     setIsCollapsed: setIsCollapsed, \n    //     setSelectedItem: setSelectedItem,\n    //     shouldRefreshHistory: shouldRefreshHistory,\n    //     setShouldRefreshHistory: setShouldRefreshHistory \n    //   })\n    // ]),\n    // h(\"div\", { class: tw`absolute top-1 left-1 m-2 z-20` }, [\n    //   h(\"button\", {\n    //     onClick: () => setIsCollapsed(!isCollapsed),\n    //     class: tw`bg-white text-black p-2 rounded-md inline-block outline-none focus:outline-none`\n    //   }, \n    //   h('img', { \n    //       src: 'https://cdn.icon-icons.com/icons2/2090/PNG/512/hide_sidebar_horizontal_icon_128227.png',\n    //       class: tw`${isCollapsed ? ' shadow-lg transform rotate-180 max-w-[32px] max-h-[32px]' : 'max-w-[32px] max-h-[32px]'}`\n    //   }))\n    // ]),\n    isCollapsed && h(\"button\", { \n      onClick: () => { setFinalResponseText(\"\"); setSelectedItem(null); setShowSubjectCard(true); },\n      class: tw`fixed z-10 top-5 right-0 transform -translate-x-1/2 w-12 h-12 bg-[#38A1FF] hover:bg-[#318BDC] text-white font-semibold flex justify-center items-center rounded-full shadow-lg`,\n    }, [\n      h(\"svg\", { class: tw`fill-current text-white`, width: \"24\", height: \"24\" },\n        h(\"path\", { d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" }) \n      )\n    ]),\n    isCollapsed && h(\"div\", {\n      class: tw`flex flex-col items-center justify-center z-0 w-full p-4`\n    }, [\n      !selectedItem && (!finalResponseText || finalResponseText === \"\") && h(InputField, { setFinalResponseText: handleTextGenerated, isLoading, setIsLoading, handleGenerateContent }),\n      showSubjectCard && finalResponseText && h(SubjectCard, { message: selectedItem || finalResponseText, class: tw`w-auto max-w-xl`}),\n      !selectedItem && h(AudioPlayer, { textToConvert: finalResponseText, textId: textId, setIsLoading, class: tw`w-full` }),\n    ]),\n  ])\n};"],
  "mappings": "8QASe,SAAR,eAAiC,CACtC,GAAM,CAAC,kBAAmB,oBAAoB,EAAI,EAAS,EAAE,EACvD,CAAC,OAAQ,SAAS,EAAI,EAAS,IAAI,EACnC,CAAC,UAAW,YAAY,EAAI,EAAS,EAAK,EAC1C,CAAC,YAAa,cAAc,EAAI,EAAS,EAAI,EAC7C,CAAC,aAAc,eAAe,EAAI,EAAS,IAAI,EAC/C,CAAC,gBAAiB,kBAAkB,EAAI,EAAS,EAAI,EACrD,CAAC,qBAAsB,uBAAuB,EAAI,EAAS,EAAK,EAGhE,oBAAsB,CAAC,KAAM,KAAO,CACxC,qBAAqB,CAAE,QAAS,CAAC,CAAE,QAAS,CAAE,cAAe,CAAE,UAAW,IAAK,CAAE,CAAE,CAAC,CAAE,CAAC,EACvF,UAAU,EAAE,CACd,EAEM,sBAAwB,MAAO,WAAc,EAChC,MAAM,MAAM,YAAa,CACxC,OAAQ,OACR,KAAM,IAAI,gBAAgB,CAAE,SAAU,CAAC,CACzC,CAAC,GAEY,IACX,wBAAwB,EAAI,CAEhC,EAGA,SAAU,IAAM,CACd,QAAQ,IAAI,YAAY,CAC1B,EAAG,CAAC,YAAY,CAAC,EAEV,GAAE,MAAO,CAAE,MAAO,gEAAiE,EAAG,CAsB3F,aAAe,GAAE,SAAU,CACzB,QAAS,IAAM,CAAE,qBAAqB,EAAE,EAAG,gBAAgB,IAAI,EAAG,mBAAmB,EAAI,CAAG,EAC5F,MAAO,kLACT,EAAG,CACD,GAAE,MAAO,CAAE,MAAO,4BAA6B,MAAO,KAAM,OAAQ,IAAK,EACvE,GAAE,OAAQ,CAAE,EAAG,qCAAsC,CAAC,CACxD,CACF,CAAC,EACD,aAAe,GAAE,MAAO,CACtB,MAAO,4DACT,EAAG,CACD,CAAC,eAAiB,CAAC,mBAAqB,oBAAsB,KAAO,GAAE,UAAY,CAAE,qBAAsB,oBAAqB,UAAW,aAAc,qBAAsB,CAAC,EAChL,iBAAmB,mBAAqB,GAAE,YAAa,CAAE,QAAS,cAAgB,kBAAmB,MAAO,mBAAmB,CAAC,EAChI,CAAC,cAAgB,GAAE,YAAa,CAAE,cAAe,kBAAmB,OAAgB,aAAc,MAAO,UAAW,CAAC,CACvH,CAAC,CACH,CAAC,CACH",
  "names": []
}
