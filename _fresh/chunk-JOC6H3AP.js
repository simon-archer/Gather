import{Jt}from"./chunk-BMKRBKO4.js";import{k}from"./chunk-JEHWBBA4.js";import{le}from"./chunk-4M2GZMYH.js";function SubjectCard({message,voiceId,setAudioBlob}){let data;try{data=JSON.parse(message.choices[0].message.function_call.arguments)}catch(error){console.error("Error parsing message:",error),data={}}let{title,explanation,keycontents}=data,[isCollapsed,setIsCollapsed]=k(!0),[isLoading,setIsLoading]=k(!1),[isListening,setIsListening]=k(!1);console.log("Title: "+title),console.log("Explanation: "+explanation);let handleListen=async()=>{setIsLoading(!0),setIsListening(!0);let textToConvert=`${title}.     ${explanation}`,response=await fetch("/api/audio",{method:"POST",body:JSON.stringify({script:textToConvert,voiceId}),headers:{"Content-Type":"application/json"}});if(response.ok){let blob=await response.blob();return console.log("Blob:",blob),setAudioBlob(blob),setIsLoading(!1),setIsListening(!1),blob}};return le("div",{class:Jt`flex flex-col items-center justify-center p-4 bg-white rounded-lg shadow-lg cursor-pointer m-4 mx-auto max-w-2xl `},[le("h1",{class:Jt`text-3xl sm:text-4xl md:text-5xl font-bold mb-4 text-blue-600 text-center`},title),keycontents&&isCollapsed&&le("div",{class:Jt`flex flex-wrap gap-2 mb-4 justify-center font-semibold flex-wrap`},Object.values(keycontents).map(keycontent=>le("span",{class:Jt`bg-white text-gray-700 rounded-full text-sm`}," \u2022 "+keycontent))),!isCollapsed&&le("p",{class:Jt`text-sm mb-4 text-gray-700 text-center`},explanation),le("div",{class:Jt`flex gap-2`},[le("button",{onClick:()=>setIsCollapsed(!isCollapsed),class:Jt`mt-auto text text-sm bg-white text-gray-700 border border-gray-800 p-2 rounded-full opacity-50 focus:outline-none`},isCollapsed?"Show Script":"Show Keypoints"),!isListening&&setAudioBlob&&le("button",{onClick:handleListen,class:Jt`bg-[#38A1FF] hover:bg-[#318BDC] mt-auto text-sm font-semibold text-white border p-2 rounded-full focus:outline-none`},isLoading?"Loading...":"Listen"),isListening&&le("div",{class:Jt`audio-spinner absolute bottom-10 left-1/2 transform p-4 text-center`}),isLoading&&le("p",{class:Jt`absolute bottom-5 left-1/2 -translate-x-1/2 text-center mt-auto text-sm font-semibold text-black p-2 focus:outline-none w-full`},"This could take up to 1 minute")])])}export{SubjectCard};
//# sourceMappingURL=chunk-JOC6H3AP.js.map
